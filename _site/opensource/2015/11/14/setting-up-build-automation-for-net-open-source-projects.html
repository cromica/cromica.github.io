<!doctype html><html lang=en-US><head><meta charset=utf-8><meta http-equiv=Content-type content="text/html; charset=utf-8"><meta name=msvalidate.01 content=E3948E882CD0536965BAC602143B54BC><title>Setting up build automation for .Net open source projects</title><meta content="Setting up build automation for .Net open source projects" property=og:title><meta content="Setting up build automation for .Net open source projects" name=twitter:title><meta content="Software developer, trainer, speaker and more by Romulus Crisan" property=og:site_name><meta content="Romulus Crisan is a software developer, trainer, speaker, agile." name=description><meta content="Romulus Crisan is a software developer, trainer, speaker, agile." property=og:description><meta content="Romulus Crisan is a software developer, trainer, speaker, agile." name=twitter:description><meta name=Author content="Romulus Crisan"><link href=https://plus.google.com/+CrisanRomulus/posts rel=author><meta content=@cromica_82 name=twitter:site><meta content=@cromica_82 name=twitter:creator><link href=/atom.xml rel=alternate title=Atom type=application/atom+xml><link href=/sitemap.xml rel=sitemap title=Sitemap type=application/xml><link href=http://www.romuluscrisan.com/opensource/2015/11/14/setting-up-build-automation-for-net-open-source-projects.html rel=canonical><meta content=article property=og:type><meta content=summary name=twitter:card><meta content=http://www.romuluscrisan.com/opensource/2015/11/14/setting-up-build-automation-for-net-open-source-projects.html property=og:url><meta content=http://www.romuluscrisan.com/opensource/2015/11/14/setting-up-build-automation-for-net-open-source-projects.html name=twitter:url><meta content=2015-11-14T18:00:00+00:00 property=article:published_time><meta content=http://www.romuluscrisan.com/index.html#about property=article:author><meta property=og:image content=http://www.romuluscrisan.com/assets/images/posts/setting-up-build-automation-net-projects/setting-up-build.jpg><meta name=twitter:image:src content=http://www.romuluscrisan.com/assets/images/posts/setting-up-build-automation-net-projects/setting-up-build.jpg><meta property=article:section content=opensource><meta property=article:tag content=.Net><meta property=article:tag content=OpenSource><meta property=article:tag content=Build><meta property=article:tag content=CI><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Dosis:300,400" rel=stylesheet type=text/css><link href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css rel=stylesheet type=text/css><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css rel=stylesheet type=text/css><link href=/../assets/dist/style.css rel=stylesheet type=text/css><link rel="shortcut icon" href=/../assets/images/favicon.png type=image/x-icon><link rel=icon href=/../assets/images/favicon.ico type=image/x-icon><link rel="shortcut icon" href=/../assets/images/favicon.ico type=image/x-icon><meta name=viewport content="width=device-width, maximum-scale=1, initial-scale=1, user-scalable=0"><script type=text/javascript src=/../assets/plugins/modernizr.min.js></script></head><body><div class="inner-cover blog-header" style="background-image:url('/../assets/images/preview/slider/3.jpg')"><div class=text-center><h1 class=big-title itemprop=name>Blog</h1><p>Share knowledge and brain dump.</p></div></div><header id=header><nav class="navbar navbar-inverse" role=navigation><div class=container><button id=mobileMenu class="fa fa-bars" type=button data-toggle=collapse data-target=.navbar-collapse></button><div class="navbar-header hidden-sm hidden-xs"><a class=navbar-brand href=/index.html><img src=/assets/images/preview/content/people/1.jpg width=50 height=50 style=border-radius:50%;display:inline> <span>ROMULUS CRISAN</span></a> <a class=rssfeed href=http://feeds.romuluscrisan.com/romuluscrisan><span class="social fa fa-rss"></span></a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><a href=# class=btn-fullscreen><i class="fa fa-external-link"></i></a><ul class="nav navbar-nav navbar-right"><li><a href=/index.html#home>Home</a></li><li><a href=/index.html#about>About</a></li><li><a href=/index.html#skills>Skills</a></li><li class=active><a href=/blog>Blog</a></li><li><a href=/index.html#contact>Contact</a></li></ul></div></div></nav></header><section id=blog><article class=container itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=row><div class="left col-md-9"><header><h1 itemprop=name>Setting up build automation for .Net open source projects</h1><small class=fsize13><a href=/opensource/2015/11/14/setting-up-build-automation-for-net-open-source-projects.html class="label label-default light"><i class="fa fa-dot-circle-o"></i> opensource</a> <a href=/opensource/2015/11/14/setting-up-build-automation-for-net-open-source-projects.html#disqus_thread class="label label-default light">0 Comments</a> <span class="label label-default light" itemprop=datePublished content>14 November 2015</span></small></header><span itemprop=articleBody><p><img src=/assets/images/posts/setting-up-build-automation-net-projects/setting-up-build.jpg alt="Setting up build automation" title="Setting up build automation" class=img-responsive></p><p class=dropcap>In the last weeks I worked on a .net client library for <a href="http://www.sdl.com/cxc/language/translation-productivity/studio-groupshare/" target=_blank>SDL Studio GroupShare</a>. This new client library is open source and meant to simplify developers work in terms of consuming resources available in GroupShare, but more about this on a future article. As I was coming closer to make a new release of this library I was thinking that it would make perfect sense to automate the build. There are many reasons to do that but for me the most important one was to have a painless mechanism to verify contribution from other developers. I've setup build automation for a few projects but this was my first attempt to do it for an open source project. While the automation concepts are exactly the same as for any other project the tooling involved is a bit different, especially if you are coming from a Microsoft world.</p><h3 id=cloud-hosted-building-automation-for-net>Cloud hosted building automation for .NET</h3><p>Open source means that your entire source code is publicly available to everyone interested, if it’s not then what’s the point of having it open source? Being public it probably means that you are hosting your code in places like <a href="https://github.com/">Github</a>, honestly nowadays this is probably your best choice. My choice to host the code for the GroupShare client library was <a href=https://github.com/sdl/groupsharekit.net>Github</a> and based on my previous experience my first idea to setup build automation was to prepare a server somewhere that would be able to grab my code and run the build script. While I could have setup a server pretty easy I immediately step backed since I was having the feeling that this approach doesn’t fit the purpose, somehow this doesn’t fit on the open source world. The reason I was having this feeling is because somebody (me) had to invest time, effort and some money to keep the server run. Also there was no simple option to share this with the other developers interested in using or contributing to the library. So I started doing some research and I found out there are a bunch of cloud hosted services that provide build automation and each of them was integrating nicely with Github. The list is pretty long so I’ll share just a few that I found most interesting and popular among other developers: <a href="https://travis-ci.org/">Travis CI</a>, <a href="https://codeship.com/">Codeship</a> and <a href="https://drone.io/">Drone.io</a>. Awesome, just that none of them had support for Windows environments and my library was .net and I was not using either <a href="http://www.mono-project.com/">Mono</a> or <a href=http://blogs.msdn.com/b/dotnet/archive/2014/12/04/introducing-net-core.aspx>.Net core</a>. So in my mind I was thinking that I should turn my attention to what Microsoft has to offer in terms of build automation since I’m pretty sure they’ll support Windows environments. I knew Microsoft had TFS Build as part of their on-premise enterprise solution and I also knew about their relatively new <a href=https://www.visualstudio.com/en-us/products/what-is-visual-studio-online-vs.aspx>visual studio online</a> offering which should include also build automation. <a href=https://www.visualstudio.com/en-us/products/what-is-visual-studio-online-vs.aspx>Visual studio online</a> does offer this capability and can also be configured to grab the code from github, more about his <a href="https://msdn.microsoft.com/en-us/Library/vs/alm/Build/github/index?f=255&amp;MSPPError=-2147217396">here</a>. Awesome again, just that this feature is not completely free and unfortunately the pricing model is not simple and friendly to understand. So again I had to continue looking for other options and I finally found <a href="http://www.appveyor.com/">AppVeyor</a> which is completely free for open source projects and it’s supporting Windows environments, actually they market themselves as <code>... Continuous Integration and Deployment tools to every .NET developer ...</code>. It’s pretty obviously that my choice was <a href=https://www.visualstudio.com/en-us/products/what-is-visual-studio-online-vs.aspx>Visual studio online</a> because … errr not. I choose <a href="http://www.appveyor.com/">AppVeyor</a> because of obvious reasons, but it’s a shame that Microsoft doesn’t have a simple free offering for open source projects given the recent strong movement towards open source.</p><h3 id=build-scripting>Build scripting</h3><p>At this point I had my source code on <a href="https://github.com/">Github</a> and choose <a href="http://www.appveyor.com/">AppVeyor</a> to run my builds. Linking them together was easy since <a href="http://www.appveyor.com/">AppVeyor</a> allows you to log in with your <a href="https://github.com/">Github</a> credentials and once you authorize <a href="http://www.appveyor.com/">AppVeyor</a> it’s just a matter of choosing the repository for which you want to build. At this point I highly recommend looking to the <a href=http://www.appveyor.com/docs>AppVeyor documentation</a> if you are not familiar with the platform.</p><p>After the linking was done <a href="http://www.appveyor.com/">AppVeyor</a> requires that you repository to have <code>appveyor.yml</code> file from which you can configure which build environment, deploy mechanism and build scripts to run. Since in my case the requirements where simple I pretty much left the default configuration. I only specified my build script:</p><script src=https://gist.github.com/cromica/03a1ba3d5cf4531f0152.js></script><p>As you can see from my above script I basically run my cmd <a href="https://www.google.ro/search?sourceid=chrome-psyapi2&amp;ion=1&amp;espv=2&amp;ie=UTF-8&amp;q=cmd%20script&amp;oq=cmd%20scri&amp;aqs=chrome.0.0j69i57j0l4.3162j0j7">Windows batch script</a> specifying two different targets one for building my library and one for run a few integration tests. The batch script is a bit more complicated at the first look but is really simple actually. The first step is to use <a href="https://www.nuget.org/">Nuget</a> to install to additional libraries that I need to run the build. First is <a href="http://fsharp.github.io/FAKE/">Fake</a>, more about this in a bit, and the XUnit test runner console that I need to run my integration tests since I’m using XUnit for testing instead of MS Tests.</p><script src=https://gist.github.com/cromica/02318ab4b34c76d19cdb.js></script><p>Creating build automation script is not something that the .Net developer has to do and this is because the wonderful job done for him by Visual Studio. That is slowly changing because of the <a href=https://en.wikipedia.org/wiki/Continuous_integration>CI</a> practice. To build a .net project/solution you need run <a href=https://msdn.microsoft.com/en-us/library/ms171452.aspx>msbuild</a> (this is what Visual Studio does behind the scenes). MSBuild is extensible and you can alter the build process based on your need but the syntax is pretty complicated and verbose (completely written in xml), personally I don’t necessarily like it. Apparently I was not the only who didn’t like working directly with msbuild so the community created libraries to simplify the build process. This type of libraries are using a domain specific language based on a well know programming, like <a href="http://rake.rubyforge.org/">rake</a> using ruby or <a href="http://gruntjs.com/">grunt</a>/<a href="http://gulpjs.com/">gulp</a> using java-script. Any of this libraries can be used to create a .net build script since they have dedicated plugins from msbuild but you’ll have to add a new dependency on your build system. For rake you will have to install ruby and for grunt/gulp you will need <a href="https://nodejs.org/en/">nodejs</a>. Based on the same concept I found 2 other libraries based on .Net programming language which didn’t require additional dependencies. One is named <a href="http://fsharp.github.io/FAKE/">fake</a> using F# and <a href=https://github.com/sakeproject/sake>sake</a> using C#. Initially I was tempted to use sake because I feel much comfortable writing in C# and I’ve seen it’s used by Microsoft in their open source repositories but it’s not well documented so I decided to use fake. I’m not an F# developer so the syntax seems kind of weird to me but it doesn’t matter that much since you only need some basics and you can of course copy from other examples. For the GroupShare client library I ended up with this:</p><script src=https://gist.github.com/cromica/57efc7eee344e84cdb8c.js></script><p>Looks a bit scary at first but just walk through it line by line and it will start make sense, especially if you’ve done some work with msbuild. First 23 lines are just setting a bunch of values and then defining some msbuild targets using fake dsl language. Name of the targets are meaningful for what they are doing.</p><h3 id=handling-sensitive-data>Handling sensitive data</h3><p>In an open source project all your information has to be public including your configuration settings, like api keys, user name or passwords. For example your application might use a mailing platform like <a href="http://www.mailgun.com/">mailigun</a> for which you have your own account which you don’t want to be shared with everyone. In a private project you don’t need to worry to much about this because typically this type of information end up in configuration file that can be accessed only by authorized people. Also you might run some integration tests as part of your build for which you might need some api key’s or credentials. The solution I found for handling sensitive data is to use <a href=https://en.wikipedia.org/wiki/Environment_variable>environment variables</a>. This are easy to configure on your machine, testing machine(s) and all of the build platforms allow configuring environment variables from and administrative panel.</p><h3 id=conclusion>Conclusion</h3><p>I hope this will give you a much clearer picture about options you have in terms of cloud hosted build platforms you can use for your project, especially open source. One thing I have to mention that each of the build platforms have offerings for non open source projects but for those you’ll have to pay.</p><p>Please let me know if you have any comments or questions.</p><p><em>Picture: <a href=https://flic.kr/p/oYw4LG>Wei-Feng Xue - Night wheel long exposure</a></em></p></span><br><div class=nav-previous><a href=http://www.romuluscrisan.com/sdl-groupshare/2015/10/29/GroupShare-custom-authentication-provider.html rel=prev><i class="fa fa-long-arrow-left nav-previous-link"></i>GroupShare custom authentication provider</a></div><div class=nav-next><a href=http://www.romuluscrisan.com/sdl-groupshare/2015/11/15/introducing-groupsharekit.html rel=next>Introducing GroupShareKit<i class="fa fa-long-arrow-right nav-next-link"></i></a></div><br><hr><div id=disqus_thread></div><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="right col-md-3"><div class=widget><h3>Blog Search</h3><form action=/search method=get class="blog-search col-lg-12 nomargin nopadding"><div class="input-group input-group-lg"><input type=text class=form-control name=q id=search-query placeholder=Search autocomplete=off> <span class=input-group-btn><button class="btn btn-primary"><i class="fa fa-search"></i></button></span></div></form></div><div class=widget><h3>Recent Posts</h3><ul><li><a href=/sdl%20studio/2016/02/21/sdl-studio-public-api.html><i class="fa fa-sign-out"></i> SDL Studio Public API</a> <small>21 February 2016</small></li><li><a href=/career/2016/02/11/first-2016-it-camp-community-event.html><i class="fa fa-sign-out"></i> First 2016 ITCamp community event</a> <small>11 February 2016</small></li><li><a href=/sdl%20studio/2016/01/31/age-of-developers-about-sdl-studio-sdk.html><i class="fa fa-sign-out"></i> About SDL Studio SDK</a> <small>31 January 2016</small></li><li><a href=/sdl-groupshare/2015/11/15/introducing-groupsharekit.html><i class="fa fa-sign-out"></i> Introducing GroupShareKit</a> <small>15 November 2015</small></li><li><a href=/opensource/2015/11/14/setting-up-build-automation-for-net-open-source-projects.html><i class="fa fa-sign-out"></i> Setting up build automation for .Net open source projects</a> <small>14 November 2015</small></li></ul></div></div></div></article></section><footer><a href=#toTop class="fa fa-arrow-up toTop"></a><div class=container><div class=row><div class="col-md-6 copyright">Romulus Crisan<br>2014 &copy; All Rights Reserved.</div><div class="col-md-6 text-right"><div class=addthis_toolbox><a class=addthis_button_linkedin_follow addthis:userid=romuluscrisan><span class="social fa fa-linkedin"></span></a> <a class=addthis_button_twitter_follow addthis:userid=cromica_82><span class="social fa fa-twitter"></span></a> <a class=addthis_button_facebook_follow addthis:userid=crisan.romulus><span class="social fa fa-facebook"></span></a> <a class=addthis_button_google_follow addthis:userid=+CrisanRomulus><span class="social fa fa-google-plus"></span></a></div></div></div></div></footer><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5308cddf5fd4896a"></script><script type=text/javascript>
    addthis.layers({
        'theme': 'transparent',
        'share': {
            'position': 'left',
            'numPreferredServices': 5
        }
    });

    var addthis_share={
        url_transforms:{
            shorten:{
                twitter:'bitly',
                facebook:'bitly',
                google:'bitly',
                linkedin:'bitly'
            }
        },
        shorteners:{
            bitly:{}
        }
    };

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48447672-1', 'romuluscrisan.com');
  ga('send', 'pageview');
    </script><script id=search-results-template type=text/mustache>{{#entries}} <article> <h3> {{#date}}<small><time datetime="{{pubdate}}" pubdate>{{displaydate}}</time></small>{{/date}} <a href="{{url}}">{{title}}</a> </h3> </article> {{/entries}}</script><script type=text/javascript src=//code.jquery.com/jquery-1.11.2.min.js></script><script type=text/javascript src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js></script><script type=text/javascript src=/../assets/plugins/modernizr.min.js></script><script type=text/javascript src=/../js/search.min.js></script><script type=text/javascript src=/../assets/dist/app.js></script><script type=text/javascript>
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'romuluscrisan';
                    /* * * DON'T EDIT BELOW THIS LINE * * */
                     (function() {
                        var dsq = document.createElement('script');
                        dsq.type = 'text/javascript';
                        dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                    (function() {
                        var s = document.createElement('script');
                        s.async = true;
                        s.type = 'text/javascript';
                        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
                        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                    }());
                    </script></body></html>